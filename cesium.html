<!DOCTYPE HTML>
<html>
   <head>
      <title>Code</title>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

  </head>
  <style>
      .william {
        color:#D0D0D0; 
        margin: 0; 
        line-height: 125%;
      }
     @media only screen and (orientation: portrait){
      .william {
        color:#f8f8f8; 
        margin: 0; 
        line-height: 125%;
      }
     }
     @media only screen and (min-device-aspect-ratio: 3/2)  and (orientation: landscape) {
      .william {
        color:#f8f8f8; 
        margin: 0; 
        line-height: 125%;
      }
        }
  </style> 
   <body>
<div class="wiskes">
     
          <div style="background: #f8f8f8; overflow:auto;width:auto;border-radius: 5px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
             <table><tr><td><pre class="william"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-style: italic">// Access Key Here (yes I know I&#39;ve made my key public, its read only)</span>
Cesium.Ion.defaultAccessToken <span style="color: #666666">=</span> <span style="color: #BB4444">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2MTc5MzVjMi00ZGIyLTQxOWItYWQzNy02ZjdmNjkzZjE3MTUiLCJpZCI6NzgwNTIsImlhdCI6MTY0MDc5NDk5Nn0.RF5UuYQaUWiPt9tFVwwGFlSgxIIM0bexarvLwqPbQhA&quot;</span>;
<span style="color: #008800; font-style: italic">// Set up viewer. Imagery provider must be set to false and imagery added later to avoid extra data usage.</span>
<span style="color: #AA22FF; font-weight: bold">var</span> viewer <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">new</span> Cesium.Viewer(<span style="color: #BB4444">&quot;cesiumContainer&quot;</span>, {
    imageryProvider<span style="color: #666666">:</span> <span style="color: #AA22FF; font-weight: bold">false</span>,
    baseLayerPicker<span style="color: #666666">:</span> <span style="color: #AA22FF; font-weight: bold">false</span>,
    sceneModePicker<span style="color: #666666">:</span> <span style="color: #AA22FF; font-weight: bold">false</span>,
    timeline<span style="color: #666666">:</span> <span style="color: #AA22FF; font-weight: bold">false</span>,
    animation<span style="color: #666666">:</span> <span style="color: #AA22FF; font-weight: bold">false</span>,
    terrainProvider<span style="color: #666666">:</span> <span style="color: #AA22FF; font-weight: bold">new</span> Cesium.CesiumTerrainProvider({
        url<span style="color: #666666">:</span> Cesium.IonResource.fromAssetId(<span style="color: #666666">1</span>),
    }),
});
<span style="color: #008800; font-style: italic">// Make terrain shaded</span>
viewer.scene.globe.depthTestAgainstTerrain <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">true</span>;
<span style="color: #008800; font-style: italic">// Load point cloud</span>
<span style="color: #AA22FF; font-weight: bold">var</span> tileset <span style="color: #666666">=</span> viewer.scene.primitives.add(<span style="color: #AA22FF; font-weight: bold">new</span> Cesium.Cesium3DTileset({
    url<span style="color: #666666">:</span> Cesium.IonResource.fromAssetId(<span style="color: #666666">725345</span>),
    <span style="color: #008800; font-style: italic">// Make point cloud shaded, only works on desktops and new (2021 +) phones.</span>
    pointCloudShading<span style="color: #666666">:</span> {
        attenuation<span style="color: #666666">:</span> <span style="color: #AA22FF; font-weight: bold">true</span>,
        maximumAttenuation<span style="color: #666666">:</span> <span style="color: #666666">2</span>,
    },
}));
<span style="color: #008800; font-style: italic">// Now we can add imagery. Here we are using Sentinel 2 @ 10m</span>
<span style="color: #AA22FF; font-weight: bold">var</span> sentinel <span style="color: #666666">=</span> viewer.imageryLayers.addImageryProvider(<span style="color: #AA22FF; font-weight: bold">new</span> Cesium.IonImageryProvider({
    assetId<span style="color: #666666">:</span> <span style="color: #666666">3954</span>
}));
<span style="color: #008800; font-style: italic">// This is the slope layer. </span>
<span style="color: #AA22FF; font-weight: bold">var</span> slope <span style="color: #666666">=</span> viewer.imageryLayers.addImageryProvider(<span style="color: #AA22FF; font-weight: bold">new</span> Cesium.IonImageryProvider({
    assetId<span style="color: #666666">:</span> <span style="color: #666666">725737</span>
}));
<span style="color: #008800; font-style: italic">// This map is by me.</span>
<span style="color: #AA22FF; font-weight: bold">var</span> credit <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">new</span> Cesium.Credit(<span style="color: #BB4444">&#39;By William Wiskes&#39;</span>);
viewer.scene.frameState.creditDisplay.addDefaultCredit(credit);
<span style="color: #008800; font-style: italic">// Set the view.</span>
<span style="color: #AA22FF; font-weight: bold">var</span> home <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">new</span> Cesium.HeadingPitchRange(<span style="color: #666666">60.5</span>, <span style="color: #666666">-0.5</span>, <span style="color: #666666">3500.0</span>);
viewer.zoomTo(tileset, home);
<span style="color: #008800; font-style: italic">// Set the home button.</span>
viewer.homeButton.viewModel.command.beforeExecute.addEventListener(
   <span style="color: #AA22FF; font-weight: bold">function</span>(e) {
      e.cancel <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">true</span>;
      viewer.zoomTo(tileset, home);
   });
<span style="color: #008800; font-style: italic">// Make an empty list for styling the point cloud.</span>
<span style="color: #AA22FF; font-weight: bold">var</span> styles <span style="color: #666666">=</span> [];
<span style="color: #008800; font-style: italic">// Define a function for styling the point cloud.</span>
<span style="color: #AA22FF; font-weight: bold">function</span> addStyle(name, style) {
    style.pointSize <span style="color: #666666">=</span> Cesium.defaultValue(style.pointSize, <span style="color: #666666">4.0</span>);
    styles.push({
        name<span style="color: #666666">:</span> name,
        style<span style="color: #666666">:</span> style,
    });
}
<span style="color: #008800; font-style: italic">// Classify the point cloud</span>
<span style="color: #AA22FF; font-weight: bold">var</span> classify <span style="color: #666666">=</span> [
            [<span style="color: #BB4444">&quot;${Classification} === 2&quot;</span>, <span style="color: #BB4444">&quot;color(&#39;brown&#39;)&quot;</span>], <span style="color: #008800; font-style: italic">// Ground</span>
            [<span style="color: #BB4444">&quot;${Classification} === 9&quot;</span>, <span style="color: #BB4444">&quot;color(&#39;blue&#39;)&quot;</span>], <span style="color: #008800; font-style: italic">// Water</span>
            [<span style="color: #BB4444">&quot;true&quot;</span>, <span style="color: #BB4444">&quot;color(&#39;green&#39;)&quot;</span>], <span style="color: #008800; font-style: italic">// Everything else </span>
        ];
<span style="color: #008800; font-style: italic">// Display all non-error LiDAR points </span>
addStyle(<span style="color: #BB4444">&quot;All Points&quot;</span>, {
    color<span style="color: #666666">:</span> {
        conditions<span style="color: #666666">:</span> classify
    },
    show<span style="color: #666666">:</span> <span style="color: #BB4444">&quot;${Classification} &lt; 10 &quot;</span>, <span style="color: #008800; font-style: italic">// errors are &gt; 9</span>
});
<span style="color: #008800; font-style: italic">// Filter to just ground points</span>
addStyle(<span style="color: #BB4444">&quot;Ground Points&quot;</span>, {
    color<span style="color: #666666">:</span> {
        conditions<span style="color: #666666">:</span> classify
    },
    show<span style="color: #666666">:</span> <span style="color: #BB4444">&quot;${Classification} === 2&quot;</span>, <span style="color: #008800; font-style: italic">// ground</span>
});
<span style="color: #008800; font-style: italic">// Filter out all points.</span>
addStyle(<span style="color: #BB4444">&quot;Slope Only&quot;</span>, {
    color<span style="color: #666666">:</span> {
        conditions<span style="color: #666666">:</span> classify
    },
    show<span style="color: #666666">:</span> <span style="color: #BB4444">&quot;${Classification} === 56&quot;</span>, <span style="color: #008800; font-style: italic">// = blank</span>
});
<span style="color: #008800; font-style: italic">// Function to apply style to the tileset.</span>
<span style="color: #AA22FF; font-weight: bold">function</span> setStyle(style) {
    <span style="color: #AA22FF; font-weight: bold">return</span> <span style="color: #AA22FF; font-weight: bold">function</span>() {
        tileset.style <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">new</span> Cesium.Cesium3DTileStyle(style);
    };
}
<span style="color: #008800; font-style: italic">// Loop through the style options adding them to a list. </span>
<span style="color: #AA22FF; font-weight: bold">var</span> styleOptions <span style="color: #666666">=</span> [];
<span style="color: #AA22FF; font-weight: bold">for</span> (<span style="color: #AA22FF; font-weight: bold">var</span> i <span style="color: #666666">=</span> <span style="color: #666666">0</span>; i <span style="color: #666666">&lt;</span> styles.length; <span style="color: #666666">++</span>i) {
    <span style="color: #AA22FF; font-weight: bold">var</span> style <span style="color: #666666">=</span> styles[i];
    styleOptions.push({
        text<span style="color: #666666">:</span> style.name,
        onselect<span style="color: #666666">:</span> setStyle(style.style), <span style="color: #008800; font-style: italic">// apply style on select</span>
    });
}
<span style="color: #008800; font-style: italic">// Add the select menu to the map.</span>
Sandcastle.addToolbarMenu(styleOptions);
</pre></td></tr></table></div>
      
     
      </div>

  </body>
</html>
